<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <link rel="alternate" type="application/atom+xml" title="Atom Feed"  href="https://btbytes.github.io/atom.xml" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>index</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; } /* Alert */
    code span.an { color: #008000; } /* Annotation */
    code span.at { } /* Attribute */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #0000ff; } /* ControlFlow */
    code span.ch { color: #008080; } /* Char */
    code span.cn { } /* Constant */
    code span.co { color: #008000; } /* Comment */
    code span.cv { color: #008000; } /* CommentVar */
    code span.do { color: #008000; } /* Documentation */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.im { } /* Import */
    code span.in { color: #008000; } /* Information */
    code span.kw { color: #0000ff; } /* Keyword */
    code span.op { } /* Operator */
    code span.ot { color: #ff4000; } /* Other */
    code span.pp { color: #ff4000; } /* Preprocessor */
    code span.sc { color: #008080; } /* SpecialChar */
    code span.ss { color: #008080; } /* SpecialString */
    code span.st { color: #008080; } /* String */
    code span.va { } /* Variable */
    code span.vs { color: #008080; } /* VerbatimString */
    code span.wa { color: #008000; font-weight: bold; } /* Warning */
  </style>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<nav>
  <span><a href="index.html" title="Home">Home</a></span> ◊ <span><a href="index.html#tags">Tags</a></span> ◊ <span><a href="index.html#archive">Archive</a></span> ◊ <span><a href="/atom.xml">Feed</a></span>
</nav>
<article>

<div class="post">
<p><date>2020-05-14</date> <a href="2020-05-14-1-getting-out-of-goldilocks-zone.html">Getting Out of the Programming Goldilocks Zone</a></p>
<p>As a programmer, I have my <a href="2020-05-06-06-happy-python.html">goldilocks zone</a> (Python).</p>
<p>In order to reach for a different language, I’ll expect to get comfortable doing the following things in a new language:</p>
<ul>
<li>string manipulation - split, join etc</li>
<li>string formatting and printing</li>
<li>string templating</li>
<li>reading and writing to files</li>
<li>iterating over the contents of a file</li>
<li>json parsing and generation</li>
<li>reading and writing csv files</li>
<li>regular expressions</li>
<li>command line arguments and parsing them</li>
<li>http client operations - GET, POST</li>
<li>reading configurations from a file - toml, yaml, ini</li>
<li>processing xml files</li>
<li>generating HTML files</li>
<li>dealing with unicode encoding</li>
<li>unit testing</li>
<li>connecting to and querying sql databases</li>
<li>shelling out and calling external processes</li>
<li>threads</li>
<li>multiprocessing</li>
<li>asynchronous programming</li>
<li>using third party code and library</li>
<li>packaging code for reuse</li>
<li>packaging binaries for deployment</li>
<li>cross-platform compilation</li>
</ul>
<p><a href="index.html#programming" class="tag programming">programming</a></p>
</div>
<div class="post">
<p><date>2020-05-13</date> <a href="2020-05-13-2-notes.html">Some interesting things</a></p>
<p><a href="https://tech.davis-hansson.com/p/make/">Your Makefiles are wrong</a> taught me some good tricks about writing make files.</p>
<hr />
<p>“Move slow and make things.” – @stevelosh (on his twitter profile). I often think about that.</p>
<p>Steve’s <a href="https://stevelosh.com/blog/2018/08/a-road-to-common-lisp/">A Road to Common Lisp</a> is an excellent article that captures some of his thought process behind that “motto”. I particularly like the “<em>Escaping the Hamster Wheel of Backwards Incompatibility</em>” section.</p>
<p>If you desire to make things that are solving <em>unusual</em> and <em>novel</em> things, and you see the things you build last for years, if not decades, you <em>have</em> consider what technologies you put your time into. Steve chose Common Lisp, and I think its a solid choice.</p>
<hr />
<p><a href="https://deno.land">Deno</a> 1.0 <a href="https://deno.land/v1">was announced today</a>. I’ve long ignored node.js, and the ecosystem around it primarily because I think the situation around <code>node_modules</code> is ridiculous. My hope for deno is that it can become a replacement for Python (and Go) for many tasks.</p>
<hr />
<p>Common Lisp things:</p>
<p>Using a portacle instance instead of trying to configure my emacs installation to avoid <a href="https://twitter.com/btbytes/status/1259890526242983939"><em>the Omnibus configuration pattern</em></a>.</p>
<p>Trying to familiarize myself with <a href="https://github.com/vindarel/cl-str/">str</a> library.</p>
<p>Common characters:</p>
<pre><code>#\Space #\Newline #\Backspace #\Tab #\Linefeed #\Page #\Return</code></pre>
<p>Spelled out: “Hash-Backslash-NAME” - <code>#\Space</code>.</p>
<p><a href="index.html#interesting" class="tag interesting">interesting</a></p>
</div>
<div class="post">
<p><date>2020-05-12</date> <a href="2020-05-12-01-notes.html">A few interesting things</a></p>
<p><a href="http://eradman.com/entrproject/">entr</a> is nice tool to add to the repertoire of scripting and make files. One of the examples given on that page is to use this program to watch over HTML+CSS file when you are editing one. I am thinking of using this to create a kind of “markdown live editor”, which uses pandoc to render markdown to html.</p>
<hr />
<p>I posted a <a href="https://cons.io">gerbil scheme</a> to <a href="https://lobste.rs/s/c29wn2/gerbil_scheme">lobste.rs</a> where the creator of <a href="https://fennel-lang.org/">Fennel Lang</a> posted a link which lead to this <a href="https://git.sr.ht/~technomancy/fennel-lang.org/tree/master/makefile">rich makefile</a> which is worthy of studying.</p>
<p>For instance, this line: <code>reference.html: fennel/reference.md ; $(PANDOC) --toc -o $@ $^</code>. I believe this means I can write one line “actions” followed by semi-colon.</p>
<p>The other thing that Makefile reminded me of is the <code>--lua-filter</code>. Pandoc ships with a lua interpreter, which makes it easy to write post processing filters without needing an additional software installed (eg: for python, you still need some kind Pandoc library).</p>
<p><em>Each Lua filter must contain element-transforming functions indexed by the name of the AST element on which the filter function should be applied.</em></p>
<p><em>The pandoc Lua module provides helper functions for element creation. It is always loaded into the script’s Lua environment.</em></p>
<p><em>The following is an example Lua script for macro-expansion:</em></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">function</span> expand_hello_world<span class="op">(</span>inline<span class="op">)</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="cf">if</span> inline<span class="op">.</span>c <span class="op">==</span> <span class="st">&#39;{{helloworld}}&#39;</span> <span class="cf">then</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="cf">return</span> pandoc<span class="op">.</span>Emph<span class="op">{</span> pandoc<span class="op">.</span>Str <span class="st">&quot;Hello, World&quot;</span> <span class="op">}</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="cf">else</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="cf">return</span> inline</span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="cf">end</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="cf">end</span></span>
<span id="cb2-8"><a href="#cb2-8"></a></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="cf">return</span> <span class="op">{{</span>Str <span class="op">=</span> expand_hello_world<span class="op">}}</span></span></code></pre></div>
<p>Important thing to remember from above snippet – Make sure you are “indexing” the functions by the AST element (above, the function <code>expand_hello_world</code> is indexed to <code>Str</code> AST element type).</p>
<hr />
<p>Data science courses of Dr Michael Guerzhoy at Princeton <a href="http://guerzhoy.princeton.edu/201s20/">SML201</a> has good intro material based on R.</p>
<hr />
<p>Started using <a href="https://www.barebones.com/products/bbedit/index.html">bbedit</a> more. I even configured the scripts that help me in editing this blog to use <code>bbedit</code> directly. I really like (much like Textwrangler’s) ability to “Untitled” buffers as a quick way to start writing without worrying about losing them if I close the editor without saving them to a file.</p>
<hr />
<p>Humour: <a href="https://saagarjha.com/blog/2020/05/10/why-we-at-famous-company-switched-to-hyped-technology/">Why we at $FAMOUS_COMPANY Switched to $HYPED_TECHNOLOGY</a> via <a href="https://rkrishnan.org/">Ramakrishnan</a>.</p>
<hr />
<p>I rediscovered <a href="https://cons.io/">Gerbil Scheme</a> two days ago, and many things clicked for me this time around, perhaps reading all the Clojure and Janet code helped. But, since this evening Racket is blowing my mind. I totally see myself reading more about Racket in the days to come.</p>
<p><a href="index.html#interesting" class="tag interesting">interesting</a></p>
</div>
<div class="post">
<p><date>2020-05-08</date> <a href="2020-05-08-01-go-third-party-packages.html">Notes to self: How to use Go Third Party Packages</a></p>
<p>I’ve been following Go programming language since about 2009 or so (have the t-shirt).</p>
<p>Go does package management differently than other languages. For one there was no tar.gz, egg, or gem to download. This note is just a reminder to myself how things work.</p>
<p>How to find new, interesting Go packages? <a href="https://golangweekly.com/issues/311">Golang weekly</a> is one place. <a href="https://github.com/lucperkins/rek">Rek</a> looks interesting.</p>
<p><a href="https://github.com/lucperkins/rek">Rek</a> is like <a href="https://requests.readthedocs.io/en/master/">Python requests</a></p>
<p>You install the package with: <code>go get github.com/lucperkins/rek</code></p>
<p>The source is installed under: <code>$GOPATH/src/github.com/lucperkins/rek</code>. On my machines, <code>$GOPATH</code> is usually set to <code>$HOME/go</code>.</p>
<p>I can then use this package in a program like this: <code>import "github.com/lucperkins/rek"</code></p>
<hr />
<p>The complete program for posterity (also, the example code from the library home page had syntax errors) is here:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">package</span> main</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">import</span> <span class="st">&quot;github.com/lucperkins/rek&quot;</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="kw">import</span> <span class="st">&quot;fmt&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="kw">import</span> <span class="st">&quot;time&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">// Comment Struct</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="kw">type</span> Comment <span class="kw">struct</span> {</span>
<span id="cb3-9"><a href="#cb3-9"></a>    Body <span class="dt">string</span> <span class="st">`json:&quot;body&quot;`</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>}</span>
<span id="cb3-11"><a href="#cb3-11"></a></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="kw">func</span> main() {</span>
<span id="cb3-13"><a href="#cb3-13"></a>    comment := Comment{Body: <span class="st">&quot;Test message&quot;</span>}</span>
<span id="cb3-14"><a href="#cb3-14"></a>    headers := <span class="kw">map</span>[<span class="dt">string</span>]<span class="dt">string</span>{<span class="st">&quot;X-Custom-Header&quot;</span>: <span class="st">&quot;Custom Header Ino &quot;</span>}</span>
<span id="cb3-15"><a href="#cb3-15"></a>    res, _ := rek.Post(<span class="st">&quot;https://httpbin.org/post&quot;</span>,</span>
<span id="cb3-16"><a href="#cb3-16"></a>        rek.Json(comment),</span>
<span id="cb3-17"><a href="#cb3-17"></a>        rek.Headers(headers),</span>
<span id="cb3-18"><a href="#cb3-18"></a>        rek.BasicAuth(<span class="st">&quot;user&quot;</span>, <span class="st">&quot;pass&quot;</span>),</span>
<span id="cb3-19"><a href="#cb3-19"></a>        rek.Timeout(<span class="dv">5</span>*time.Second),</span>
<span id="cb3-20"><a href="#cb3-20"></a>    )</span>
<span id="cb3-21"><a href="#cb3-21"></a></span>
<span id="cb3-22"><a href="#cb3-22"></a>    fmt.Println(res.StatusCode())</span>
<span id="cb3-23"><a href="#cb3-23"></a>    fmt.Println(res.Text())</span>
<span id="cb3-24"><a href="#cb3-24"></a>}</span></code></pre></div>
<p>Running this program with <code>go run .</code> will produce:</p>
<pre><code>200
{
  &quot;args&quot;: {},
  &quot;data&quot;: &quot;{\&quot;body\&quot;:\&quot;Test message\&quot;}&quot;,
  &quot;files&quot;: {},
  &quot;form&quot;: {},
  &quot;headers&quot;: {
    &quot;Accept-Encoding&quot;: &quot;gzip&quot;,
    &quot;Authorization&quot;: &quot;Basic dXNlcjpwYXNz&quot;,
    &quot;Content-Length&quot;: &quot;23&quot;,
    &quot;Content-Type&quot;: &quot;application/json; charset=utf-8&quot;,
    &quot;Host&quot;: &quot;httpbin.org&quot;,
    &quot;User-Agent&quot;: &quot;Go-http-client/2.0&quot;,
    &quot;X-Amzn-Trace-Id&quot;: &quot;Root=1-5eb56f0a-33437e749f972658c175508a&quot;,
    &quot;X-Custom-Header&quot;: &quot;Custom Header Ino&quot;
  },
  &quot;json&quot;: {
    &quot;body&quot;: &quot;Test message&quot;
  },
  &quot;origin&quot;: &quot;123.45.67.8&quot;,
  &quot;url&quot;: &quot;https://httpbin.org/post&quot;
}</code></pre>
<p>Update:</p>
<ol type="1">
<li>Running <code>go get -u package</code> (note the <code>-u</code> flag) will <em>update</em> the local copy of the package.</li>
<li>Running <code>go get -u -d foo/...</code> will download all the subpackages of <code>foo</code>.</li>
</ol>
<p><a href="index.html#golang" class="tag golang">golang</a></p>
</div>
<div class="post">
<p><date>2020-05-07</date> <a href="2020-05-07-02-code-in-books.html">My code in books</a></p>
<p>During a “vanity search” of this blog “btbytes.github.io”, I found out that some of my code have been quoted in published books:</p>
<p>(<a href="https://gist.github.com/btbytes/79877">A Particle Swarm Optimization</a>) implementation in Python in <a href="https://www.packtpub.com/hardware-and-creative/intelligent-iot-projects-7-days">“Intelligent IoT Projects in 7 Days”</a>. I remember writing this code for Dr Eberhart’s “Computation Intelligence” class at IUPUI.</p>
<p><img src="images/pso-book.png" /></p>
<p>The code in question:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">#!/usr/bin/env python</span></span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">&#39;&#39;&#39;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">pso.py</span></span>
<span id="cb5-5"><a href="#cb5-5"></a></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">A simple implementation of the Particle Swarm Optimisation Algorithm.</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">Uses Numpy for matrix operations.</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">Pradeep Gowda 2009-03-16</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">&#39;&#39;&#39;</span></span>
<span id="cb5-10"><a href="#cb5-10"></a></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="im">from</span> numpy <span class="im">import</span> array</span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="im">from</span> random <span class="im">import</span> random</span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="im">from</span> math <span class="im">import</span> sin, sqrt</span>
<span id="cb5-14"><a href="#cb5-14"></a></span>
<span id="cb5-15"><a href="#cb5-15"></a>iter_max <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>pop_size <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>dimensions <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb5-18"><a href="#cb5-18"></a>c1 <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>c2 <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb5-20"><a href="#cb5-20"></a>err_crit <span class="op">=</span> <span class="fl">0.00001</span></span>
<span id="cb5-21"><a href="#cb5-21"></a></span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="kw">class</span> Particle:</span>
<span id="cb5-23"><a href="#cb5-23"></a>    <span class="cf">pass</span></span>
<span id="cb5-24"><a href="#cb5-24"></a></span>
<span id="cb5-25"><a href="#cb5-25"></a><span class="kw">def</span> f6(param):</span>
<span id="cb5-26"><a href="#cb5-26"></a>    <span class="co">&#39;&#39;&#39;Schaffer&#39;s F6 function&#39;&#39;&#39;</span></span>
<span id="cb5-27"><a href="#cb5-27"></a>    para <span class="op">=</span> param<span class="op">*</span><span class="dv">10</span></span>
<span id="cb5-28"><a href="#cb5-28"></a>    para <span class="op">=</span> param[<span class="dv">0</span>:<span class="dv">2</span>]</span>
<span id="cb5-29"><a href="#cb5-29"></a>    num <span class="op">=</span> (sin(sqrt((para[<span class="dv">0</span>] <span class="op">*</span> para[<span class="dv">0</span>]) <span class="op">+</span> (para[<span class="dv">1</span>] <span class="op">*</span> para[<span class="dv">1</span>])))) <span class="op">*</span> <span class="op">\</span></span>
<span id="cb5-30"><a href="#cb5-30"></a>        (sin(sqrt((para[<span class="dv">0</span>] <span class="op">*</span> para[<span class="dv">0</span>]) <span class="op">+</span> (para[<span class="dv">1</span>] <span class="op">*</span> para[<span class="dv">1</span>])))) <span class="op">-</span> <span class="fl">0.5</span></span>
<span id="cb5-31"><a href="#cb5-31"></a>    denom <span class="op">=</span> (<span class="fl">1.0</span> <span class="op">+</span> <span class="fl">0.001</span> <span class="op">*</span> ((para[<span class="dv">0</span>] <span class="op">*</span> para[<span class="dv">0</span>]) <span class="op">+</span> (para[<span class="dv">1</span>] <span class="op">*</span> para[<span class="dv">1</span>]))) <span class="op">*</span> <span class="op">\</span></span>
<span id="cb5-32"><a href="#cb5-32"></a>            (<span class="fl">1.0</span> <span class="op">+</span> <span class="fl">0.001</span> <span class="op">*</span> ((para[<span class="dv">0</span>] <span class="op">*</span> para[<span class="dv">0</span>]) <span class="op">+</span> (para[<span class="dv">1</span>] <span class="op">*</span> para[<span class="dv">1</span>])))</span>
<span id="cb5-33"><a href="#cb5-33"></a>    f6 <span class="op">=</span>  <span class="fl">0.5</span> <span class="op">-</span> (num<span class="op">/</span>denom)</span>
<span id="cb5-34"><a href="#cb5-34"></a>    errorf6 <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> f6</span>
<span id="cb5-35"><a href="#cb5-35"></a>    <span class="cf">return</span> f6, errorf6<span class="op">;</span></span>
<span id="cb5-36"><a href="#cb5-36"></a></span>
<span id="cb5-37"><a href="#cb5-37"></a></span>
<span id="cb5-38"><a href="#cb5-38"></a><span class="co">#initialize the particles</span></span>
<span id="cb5-39"><a href="#cb5-39"></a>particles <span class="op">=</span> []</span>
<span id="cb5-40"><a href="#cb5-40"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(pop_size):</span>
<span id="cb5-41"><a href="#cb5-41"></a>    p <span class="op">=</span> Particle()</span>
<span id="cb5-42"><a href="#cb5-42"></a>    p.params <span class="op">=</span> array([random() <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(dimensions)])</span>
<span id="cb5-43"><a href="#cb5-43"></a>    p.fitness <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb5-44"><a href="#cb5-44"></a>    p.v <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb5-45"><a href="#cb5-45"></a>    particles.append(p)</span>
<span id="cb5-46"><a href="#cb5-46"></a></span>
<span id="cb5-47"><a href="#cb5-47"></a><span class="co"># let the first particle be the global best</span></span>
<span id="cb5-48"><a href="#cb5-48"></a>gbest <span class="op">=</span> particles[<span class="dv">0</span>]</span>
<span id="cb5-49"><a href="#cb5-49"></a>err <span class="op">=</span> <span class="dv">999999999</span></span>
<span id="cb5-50"><a href="#cb5-50"></a><span class="cf">while</span> i <span class="op">&lt;</span> iter_max :</span>
<span id="cb5-51"><a href="#cb5-51"></a>    <span class="cf">for</span> p <span class="kw">in</span> particles:</span>
<span id="cb5-52"><a href="#cb5-52"></a>        fitness,err <span class="op">=</span> f6(p.params)</span>
<span id="cb5-53"><a href="#cb5-53"></a>        <span class="cf">if</span> fitness <span class="op">&gt;</span> p.fitness:</span>
<span id="cb5-54"><a href="#cb5-54"></a>            p.fitness <span class="op">=</span> fitness</span>
<span id="cb5-55"><a href="#cb5-55"></a>            p.best <span class="op">=</span> p.params</span>
<span id="cb5-56"><a href="#cb5-56"></a></span>
<span id="cb5-57"><a href="#cb5-57"></a>        <span class="cf">if</span> fitness <span class="op">&gt;</span> gbest.fitness:</span>
<span id="cb5-58"><a href="#cb5-58"></a>            gbest <span class="op">=</span> p</span>
<span id="cb5-59"><a href="#cb5-59"></a>        v <span class="op">=</span> p.v <span class="op">+</span> c1 <span class="op">*</span> random() <span class="op">*</span> (p.best <span class="op">-</span> p.params) <span class="op">\</span></span>
<span id="cb5-60"><a href="#cb5-60"></a>                <span class="op">+</span> c2 <span class="op">*</span> random() <span class="op">*</span> (gbest.params <span class="op">-</span> p.params)</span>
<span id="cb5-61"><a href="#cb5-61"></a>        p.params <span class="op">=</span> p.params <span class="op">+</span> v</span>
<span id="cb5-62"><a href="#cb5-62"></a></span>
<span id="cb5-63"><a href="#cb5-63"></a>    i  <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-64"><a href="#cb5-64"></a>    <span class="cf">if</span> err <span class="op">&lt;</span> err_crit:</span>
<span id="cb5-65"><a href="#cb5-65"></a>        <span class="cf">break</span></span>
<span id="cb5-66"><a href="#cb5-66"></a>    <span class="co">#progress bar. &#39;.&#39; = 10%</span></span>
<span id="cb5-67"><a href="#cb5-67"></a>    <span class="cf">if</span> i <span class="op">%</span> (iter_max<span class="op">/</span><span class="dv">10</span>) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb5-68"><a href="#cb5-68"></a>        <span class="bu">print</span> <span class="st">&#39;.&#39;</span></span>
<span id="cb5-69"><a href="#cb5-69"></a></span>
<span id="cb5-70"><a href="#cb5-70"></a><span class="bu">print</span> <span class="st">&#39;</span><span class="ch">\n</span><span class="st">Particle Swarm Optimisation</span><span class="ch">\n</span><span class="st">&#39;</span></span>
<span id="cb5-71"><a href="#cb5-71"></a><span class="bu">print</span> <span class="st">&#39;PARAMETERS</span><span class="ch">\n</span><span class="st">&#39;</span>,<span class="st">&#39;-&#39;</span><span class="op">*</span><span class="dv">9</span></span>
<span id="cb5-72"><a href="#cb5-72"></a><span class="bu">print</span> <span class="st">&#39;Population size : &#39;</span>, pop_size</span>
<span id="cb5-73"><a href="#cb5-73"></a><span class="bu">print</span> <span class="st">&#39;Dimensions      : &#39;</span>, dimensions</span>
<span id="cb5-74"><a href="#cb5-74"></a><span class="bu">print</span> <span class="st">&#39;Error Criterion : &#39;</span>, err_crit</span>
<span id="cb5-75"><a href="#cb5-75"></a><span class="bu">print</span> <span class="st">&#39;c1              : &#39;</span>, c1</span>
<span id="cb5-76"><a href="#cb5-76"></a><span class="bu">print</span> <span class="st">&#39;c2              : &#39;</span>, c2</span>
<span id="cb5-77"><a href="#cb5-77"></a><span class="bu">print</span> <span class="st">&#39;function        :  f6&#39;</span></span>
<span id="cb5-78"><a href="#cb5-78"></a></span>
<span id="cb5-79"><a href="#cb5-79"></a><span class="bu">print</span> <span class="st">&#39;RESULTS</span><span class="ch">\n</span><span class="st">&#39;</span>, <span class="st">&#39;-&#39;</span><span class="op">*</span><span class="dv">7</span></span>
<span id="cb5-80"><a href="#cb5-80"></a><span class="bu">print</span> <span class="st">&#39;gbest fitness   : &#39;</span>, gbest.fitness</span>
<span id="cb5-81"><a href="#cb5-81"></a><span class="bu">print</span> <span class="st">&#39;gbest params    : &#39;</span>, gbest.params</span>
<span id="cb5-82"><a href="#cb5-82"></a><span class="bu">print</span> <span class="st">&#39;iterations      : &#39;</span>, i<span class="op">+</span><span class="dv">1</span></span>
<span id="cb5-83"><a href="#cb5-83"></a><span class="co">## Uncomment to print particles</span></span>
<span id="cb5-84"><a href="#cb5-84"></a><span class="co">#for p in particles:</span></span>
<span id="cb5-85"><a href="#cb5-85"></a><span class="co">#    print &#39;params: %s, fitness: %s, best: %s&#39; % (p.params, p.fitness, p.best)</span></span></code></pre></div>
<p>That’s in Python2.x. Should probably rewrite it in Python3 one of these days.</p>
<hr />
<p>A link to my <a href="http://btbytes.github.io/pyofc2/">PyOFC2</a> Python charting library in <a href="https://books.google.com/books?id=RHBWBQAAQBAJ&amp;lpg=PA46&amp;ots=K3Ax-hLlZg&amp;dq=btbytes.github.io&amp;pg=PA46#v=onepage&amp;q=btbytes.github.io&amp;f=false">“Building a Cloud Computing Service: An Introduction to the Cloud”</a>.</p>
<p><img src="images/pyofc2-book.png" /></p>
<p><a href="index.html#programming" class="tag programming">programming</a></p>
</div>
<h2 id="archive">Archive</h2>
<dl>
<dt>
2020
</dt>
<dd>
<p>
<a href="2020-05-06-06-happy-python.html">My Happy Python Workflow </a> <date style="float:right;">2020-05-06</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-06-04-codespaces.html">github codespaces </a> <date style="float:right;">2020-05-06</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-05-02-bari.html">Just-what-you-need blogging with bari </a> <date style="float:right;">2020-05-05</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-05-01-golang-hash-builds.html">Building Go Programs with Source File Hash baked in </a> <date style="float:right;">2020-05-05</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-02-01-quip.html">Quip </a> <date style="float:right;">2020-05-02</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-01-01-interest-calculation.html">A worked exmaple of - A persian folk method of figuring interest </a> <date style="float:right;">2020-05-01</date>
</p>
</dd>
<dd>
<p>
<a href="2020-04-29-pipx.html">pipx is like brew for python applications </a> <date style="float:right;">2020-04-29</date>
</p>
</dd>
<dd>
<p>
<a href="2020-04-29-courier.html">Courier is a nice monospace font </a> <date style="float:right;">2020-04-29</date>
</p>
</dd>
<dd>
<p>
<a href="2020-04-29-conwayslaw.html">Conway’s law </a> <date style="float:right;">2020-04-29</date>
</p>
</dd>
</dl>
<h2 id="tags">Tags</h2>
<dl>
<dt>
<span id="computing" class="tagged">computing</span>
</dt>
<dd>
<p>
<a href="2020-04-29-conwayslaw.html">Conway’s law</a><date style="float:right;">2020-04-29</date>
</p>
</dd>
<dt>
<span id="fonts" class="tagged">fonts</span>
</dt>
<dd>
<p>
<a href="2020-04-29-courier.html">Courier is a nice monospace font</a><date style="float:right;">2020-04-29</date>
</p>
</dd>
<dt>
<span id="golang" class="tagged">golang</span>
</dt>
<dd>
<p>
<a href="2020-05-05-01-golang-hash-builds.html">Building Go Programs with Source File Hash baked in</a><date style="float:right;">2020-05-05</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-08-01-go-third-party-packages.html">Notes to self: How to use Go Third Party Packages</a><date style="float:right;">2020-05-08</date>
</p>
</dd>
<dt>
<span id="interesting" class="tagged">interesting</span>
</dt>
<dd>
<p>
<a href="2020-05-12-01-notes.html">A few interesting things</a><date style="float:right;">2020-05-12</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-13-2-notes.html">Some interesting things</a><date style="float:right;">2020-05-13</date>
</p>
</dd>
<dt>
<span id="mathematics" class="tagged">mathematics</span>
</dt>
<dd>
<p>
<a href="2020-05-01-01-interest-calculation.html">A worked exmaple of - A persian folk method of figuring interest</a><date style="float:right;">2020-05-01</date>
</p>
</dd>
<dt>
<span id="programming" class="tagged">programming</span>
</dt>
<dd>
<p>
<a href="2020-05-06-04-codespaces.html">github codespaces</a><date style="float:right;">2020-05-06</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-07-02-code-in-books.html">My code in books</a><date style="float:right;">2020-05-07</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-14-1-getting-out-of-goldilocks-zone.html">Getting Out of the Programming Goldilocks Zone</a><date style="float:right;">2020-05-14</date>
</p>
</dd>
<dt>
<span id="python" class="tagged">python</span>
</dt>
<dd>
<p>
<a href="2020-04-29-pipx.html">pipx is like brew for python applications</a><date style="float:right;">2020-04-29</date>
</p>
</dd>
<dd>
<p>
<a href="2020-05-06-06-happy-python.html">My Happy Python Workflow</a><date style="float:right;">2020-05-06</date>
</p>
</dd>
<dt>
<span id="software" class="tagged">software</span>
</dt>
<dd>
<p>
<a href="2020-05-02-01-quip.html">Quip</a><date style="float:right;">2020-05-02</date>
</p>
</dd>
</dl>
</article>
<footer>
  <p>Made with <a href="https://github.com/btbytes/btbytes.github.io/blob/master/bari">bari</a> with help from <a href="https://pandoc.org">pandoc</a>, <a href="https://www.gnu.org/software/make/">make</a> and <a href="https://www.python.org">python</a> </p>
</footer>
<script data-goatcounter="https://btbytes-github.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
